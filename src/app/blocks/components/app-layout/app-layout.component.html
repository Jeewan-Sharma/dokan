<app-announcement></app-announcement>
<app-header (onCartClicked)="showCart()"></app-header>
<router-outlet></router-outlet>
<app-footer></app-footer>
<app-loader></app-loader>
<app-toast></app-toast>

<!-- cart -->
<p-dialog *ngIf="(screenSize$ | async) === 'lg' || (screenSize$ | async) === 'xl'" class="header-less-dialog"
  [modal]='true' [(visible)]="cartVisibility" [style]="{width: '95vw', height:'100vh'}">
  <ng-template pTemplate="header">
    <div class="px-2 pb-2">
      <div class="flex gap-2 align-items-center">
        <p class="text-3xl font-bold">Cart</p>
        <i class="pi pi-shopping-cart text-3xl"></i>
      </div>
    </div>
  </ng-template>
  <div class="p-3">
    <app-cart *ngIf="cartVisibility"></app-cart>
  </div>
  <ng-template pTemplate="footer">
    <div class="grid">
      <div class="col-12 lg:col-8 mt-4">
        <div class="flex justify-content-between ">
          <p class="text-xl text-800 font-bold pl-6">Total Items</p>
          <p class="text-2xl text-800 font-bold pr-6">{{(_cartService.totalItems$| async)}}</p>
        </div>
      </div>
      <div class="col-12 lg:col-4 pr-4">
        <button [disabled]="(_cartService.cartProducts$ | async)?.length === 0" (click)="proceedToCheckout()" pButton
          pRipple label="Proceed to Checkout" class="w-full mt-3"></button>
      </div>
    </div>
  </ng-template>
</p-dialog>

<p-sidebar header="Cart" *ngIf="(screenSize$ | async) === 'sm' || (screenSize$ | async) === 'md'"
  [(visible)]="cartVisibility" position="bottom" [style]="{height:'90vh'}" styleClass="border-round-top">
  <ng-template pTemplate="header">
    <div class="px-2 pb-2">
      <div class="flex gap-2 align-items-center">
        <p class="text-3xl font-bold">Cart</p>
        <i class="pi pi-shopping-cart text-3xl"></i>
      </div>
    </div>
  </ng-template>
  <ng-template pTemplate="content">
    <div class="px-3">
      <app-cart *ngIf="cartVisibility"></app-cart>
    </div>
  </ng-template>
  <ng-template pTemplate="footer">
    <div class="px-2 pb-2">
      <button [disabled]="(_cartService.cartProducts$ | async)?.length === 0" (click)="proceedToCheckout()" pButton
        pRipple label="Proceed to Checkout" class="w-full mt-3"></button>
    </div>
  </ng-template>
</p-sidebar>